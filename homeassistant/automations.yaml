# Flic
- alias: Toggle lights in the bathroom when bathroom flic is pressed once
  trigger:
    platform: event
    event_type: flic_click
    event_data:
      button_name: flic_80e4da72f681 #bathroom_flic
      click_type: single
  action:
    service: light.toggle
    entity_id: light.bathroom_lights
- alias: Toggle lights in the office when office flic is pressed once
  trigger:
    platform: event
    event_type: flic_click
    event_data:
      button_name: flic_80e4da735099 #office_flic
      click_type: single
  action:
    service: light.toggle
    entity_id: light.office_lights
- alias: Toggle lights in the living room dining area when kitchen flic is pressed once
  trigger:
    platform: event
    event_type: flic_click
    event_data:
      button_name: flic_80e4da74589d #kitchen_flic
      click_type: single
  action:
    service: light.toggle
    entity_id: light.living_room_dining_area_lights
- alias: Toggle lights in the living room relax area when hallway flic is pressed once
  trigger:
    platform: event
    event_type: flic_click
    event_data:
      button_name: flic_80e4da734100 #hallway_flic
      click_type: single
  action:
    service: light.toggle
    entity_id: light.living_room_relax_area_lights

# General

- alias: 'Turn off everything when everybody leaves home'
  trigger:
    - platform: state
      entity_id: group.all_persons
      to: 'not_home'
      for:
        minutes: 1
  action:
    service: script.turn_on
    entity_id: script.turn_off_everything


- alias: 'Turn on necessary things when anyone comes back home'
  trigger:
    - platform: state
      entity_id: group.all_persons
      to: 'home'
      for:
        minutes: 1
  action:
    service: script.turn_on
    entity_id: script.turn_on_necessary_things


- alias: 'Say welcome Pawel when Pawel is back home'
  trigger:
    - platform: state
      entity_id: person.pawel
      to: 'home'
  action:
    service: script.announce_everywhere
    data:
      message: 'Welcome back Pawel!'

- alias: 'Say welcome Athena when Athena is back home'
  trigger:
    - platform: state
      entity_id: person.athena
      to: 'home'
  action:
    service: script.announce_everywhere
    data:
      message: 'Welcome back Athena!'

# Bathroom Wallmote

- alias: Toggle bathroom lights on wallmote button 1 click
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 0
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.bathroom_lights

- alias: Set bathroom lights to default on wallmote button 1 hold
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 2
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_bathroom_lights_to_default

- alias: Toggle hallway lights on wallmote button 2 click
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 0
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.hallway_lights

- alias: Set hallway lights to default on wallmote button 2 hold
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 2
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_hallway_lights_to_default


- alias: Toggle living room lights on wallmote button 3 click
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 0
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.living_room_lights

- alias: Set living room lights to default on wallmote button 3 hold
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 2
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_living_room_lights_to_default


- alias: Toggle kitchen lights on wallmote button 4 click
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 0
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.kitchen_lights

- alias: Set kitchen lights to default on wallmote button 4 hold
  trigger:
  - event_data:
      entity_id: zwave.bathroom_wallmote
      scene_data: 2
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_kitchen_lights_to_default


# Toilet Wallmote

- alias: Toggle office lights on wallmote button 1 click
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 0
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.office_lights

- alias: Set office lights to default on wallmote button 1 hold
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 2
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_office_lights_to_default

- alias: Toggle toilet lights on wallmote button 2 click
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 0
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.toilet_lights

- alias: Set toilet lights to default on wallmote button 2 hold
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 2
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_toilet_lights_to_default


- alias: Toggle hallway lights on wallmote button 3 click
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 0
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.hallway_lights

- alias: Set hallway lights to default on wallmote button 3 hold
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 2
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_hallway_lights_to_default


- alias: Toggle toilet strip on wallmote button 4 click
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 0
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.toilet_strip

- alias: Set toilet strip to default on wallmote button 4 hold
  trigger:
  - event_data:
      entity_id: zwave.toilet_wallmote
      scene_data: 2
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_toilet_strip_to_default


# Bedroom Wallmote

- alias: Toggle bedroom downlights on wallmote button 1 click
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 0
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.bedroom_downlights

- alias: Set bedroom downlights to default on wallmote button 1 hold
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 2
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_bedroom_downlights_to_default


- alias: Toggle bedroom strip on wallmote button 2 click
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 0
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.bedroom_strip

- alias: Set bedroom strip to default on wallmote button 2 hold
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 2
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_bedroom_strip_to_default


- alias: Toggle bedroom cabinet strip on wallmote button 3 click
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 0
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.bedroom_cabinet_strip

- alias: Set bedroom cabinet strip to default on wallmote button 3 hold
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 2
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_bedroom_cabinet_strip_to_default


- alias: Toggle bedroom TV on wallmote button 4 click
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 0
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: media_player.toggle
    entity_id: media_player.bedroom_tv_2

- alias: Turn off bedroom TV on wallmote button 4 hold
  trigger:
  - event_data:
      entity_id: zwave.bedroom_wallmote
      scene_data: 2
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: media_player.turn_off
    entity_id: media_player.bedroom_tv_2


# Kitchen Wallmote

- alias: Toggle kitchen countertop lights on wallmote button 1 click
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 0
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.kitchen_countertop_lights

- alias: Set kitchen countertop lights to default on wallmote button 1 hold
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 2
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_kitchen_countertop_lights_to_default

- alias: Toggle kitchen island lights on wallmote button 2 click
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 0
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.kitchen_island_lights

- alias: Set kitchen island lights to default on wallmote button 2 hold
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 2
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_kitchen_island_lights_to_default


- alias: Toggle kitchen cabinet strip on wallmote button 3 click
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 0
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.kitchen_cabinet_strip

- alias: Set kitchen cabinet strip to default on wallmote button 3 hold
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 2
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_kitchen_cabinet_strip_to_default


- alias: Toggle kitchen island strip on wallmote button 4 click
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 0
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.kitchen_island_strip

- alias: Set kitchen island strip to default on wallmote button 4 hold
  trigger:
  - event_data:
      entity_id: zwave.kitchen_wallmote
      scene_data: 2
      scene_id: 4
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_kitchen_island_strip_to_default


# Hallway Wallmote

- alias: Toggle hallway lights on hallway wallmote button 1 click
  trigger:
  - event_data:
      entity_id: zwave.hallway_wallmote
      scene_data: 0
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.hallway_lights

- alias: Set hallway lights to default on hallway wallmote button 1 hold
  trigger:
  - event_data:
      entity_id: zwave.hallway_wallmote
      scene_data: 2
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_hallway_lights_to_default

- alias: Toggle hallway strip on hallway wallmote button 2 click
  trigger:
  - event_data:
      entity_id: zwave.hallway_wallmote
      scene_data: 0
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.hallway_strip

- alias: Set hallway strip to default on hallway wallmote button 2 hold
  trigger:
  - event_data:
      entity_id: zwave.hallway_wallmote
      scene_data: 2
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_hallway_strip_to_default


- alias: Turn off all lights on hallway wallmote button 3 click
  trigger:
  - event_data:
      entity_id: zwave.hallway_wallmote
      scene_data: 0
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.turn_off
    entity_id: group.all_lights

- alias: Turn off all devices on hallway wallmote button 3 hold
  trigger:
  - event_data:
      entity_id: zwave.hallway_wallmote
      scene_data: 2
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.turn_off_everything






# Living room Wallmote

- alias: Toggle living room relax area lights on living room wallmote button 1 click
  trigger:
  - event_data:
      entity_id: zwave.living_room_wallmote
      scene_data: 0
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.living_room_relax_area_lights

- alias: Set living room relax area lights lights to default on living room wallmote button 1 hold
  trigger:
  - event_data:
      entity_id: zwave.living_room_wallmote
      scene_data: 2
      scene_id: 1
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_living_room_relax_area_lights_to_default

- alias: Toggle living room dining area lights on living room wallmote button 2 click
  trigger:
  - event_data:
      entity_id: zwave.living_room_wallmote
      scene_data: 0
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: light.toggle
    entity_id: light.living_room_dining_area_lights

- alias: Set living room dining area lights lights to default on living room wallmote button 2 hold
  trigger:
  - event_data:
      entity_id: zwave.living_room_wallmote
      scene_data: 2
      scene_id: 2
    event_type: zwave.scene_activated
    platform: event
  action:
    service: script.turn_on
    entity_id: script.set_living_room_dining_area_lights_to_default


- alias: Toggle living room TV on living room wallmote button 3 click
  trigger:
  - event_data:
      entity_id: zwave.living_room_wallmote
      scene_data: 0
      scene_id: 3
    event_type: zwave.scene_activated
    platform: event
  action:
    service: media_player.toggle
    entity_id: media_player.living_room_tv_2



# Bedroom door sensor

- alias: Turn bedroom lights on door open
  trigger:
    platform: state
    entity_id: sensor.bedroom_door_opening_sensor_access_control
    from: '23'
    to: '22'
  condition:
      condition: or  # 'when dark' condition: either after sunset or before sunrise - equivalent to a state condition on `sun.sun` of `below_horizon`
      conditions:
        - condition: sun
          after: sunset
        - condition: sun
          before: sunrise
  action:
    service: light.turn_on
    entity_id: light.bedroom_lights


- alias: Say welcome on bedroom door open
  trigger:
    platform: state
    entity_id: sensor.bedroom_door_opening_sensor_access_control
    from: '23'
    to: '22'
  action:
    service: tts.google_say
    entity_id: "media_player.bedroom"
    data:
      message: 'Welcome to the bedroom!'

# Office door sensor

- alias: Turn office lights on door open
  trigger:
    platform: state
    entity_id: sensor.office_door_opening_sensor_access_control
    from: '23'
    to: '22'
  condition:
      condition: or  # 'when dark' condition: either after sunset or before sunrise - equivalent to a state condition on `sun.sun` of `below_horizon`
      conditions:
        - condition: sun
          after: sunset
        - condition: sun
          before: sunrise
  action:
    service: light.turn_on
    entity_id: light.office_lights

- alias: Say welcome on office door open
  trigger:
    platform: state
    entity_id: sensor.office_door_opening_sensor_access_control
    from: '23'
    to: '22'
  action:
    service: tts.google_say
    entity_id: "media_player.office"
    data:
      message: 'Welcome to the office!'

# Hallway door sensor

- alias: Turn hallway lights on door open
  trigger:
    platform: state
    entity_id: sensor.hallway_door_opening_sensor_access_control
    from: '23'
    to: '22'
  condition:
      condition: or  # 'when dark' condition: either after sunset or before sunrise - equivalent to a state condition on `sun.sun` of `below_horizon`
      conditions:
        - condition: sun
          after: sunset
        - condition: sun
          before: sunrise
  action:
    - service: light.turn_on
      entity_id: light.hallway_lights
    - service: script.announce_everywhere
      data:
        message: 'Front door opened'

# Bathroom door sensor

- alias: Turn bathroom lights on door open
  trigger:
    platform: state
    entity_id: sensor.bathroom_door_opening_sensor_access_control
    from: '23'
    to: '22'
  action:
    service: light.turn_on
    entity_id: light.bathroom_lights

- alias: Say welcome on bathroom door open
  trigger:
    platform: state
    entity_id: sensor.bathroom_door_opening_sensor_access_control
    from: '23'
    to: '22'
  action:
    service: script.announce_everywhere
    data:
      message: 'Motion in bathroom!'

- alias: Turn off bathroom lights on door close if there is no motion inside
  trigger:
    platform: state
    entity_id: sensor.bathroom_door_opening_sensor_access_control
    from: '22'
    to: '23'
  condition:
    - condition: state
      entity_id: 'sensor.bathroom_multisensor_burglar'
      state: '0'
  action:
    service: light.turn_off
    entity_id: light.bathroom_lights


# Toilet door sensor

- alias: Turn toilet lights on door open
  trigger:
    platform: state
    entity_id: sensor.toilet_door_opening_sensor_access_control
    from: '23'
    to: '22'
  action:
    service: light.turn_on
    entity_id: light.toilet_lights


- alias: Say welcome on toilet door open
  trigger:
    platform: state
    entity_id: sensor.toilet_door_opening_sensor_access_control
    from: '23'
    to: '22'
  action:
    service: tts.google_say
    entity_id: "media_player.toilet"
    data:
      message: 'Welcome to the toilet!'


- alias: Turn off toilet lights on door close if there is no motion inside
  trigger:
    platform: state
    entity_id: sensor.toilet_door_opening_sensor_access_control
    from: '22'
    to: '23'
  condition:
    - condition: state
      entity_id: 'sensor.toilet_multisensor_burglar'
      state: '0'
  action:
    service: light.turn_off
    entity_id: light.toilet_lights


# Hallway multisensor

- alias: Turn on hallway lights on motion when dark
  trigger:
    platform: state
    entity_id: sensor.hallway_multisensor_burglar
    from: '0'
    to: '8'
  condition:
      condition: or  # 'when dark' condition: either after sunset or before sunrise - equivalent to a state condition on `sun.sun` of `below_horizon`
      conditions:
        - condition: sun
          after: sunset
        - condition: sun
          before: sunrise
  action:
    service: light.turn_on
    entity_id: light.hallway_lights

- alias: Turn off hallway lights when motion stops
  trigger:
    platform: state
    entity_id: sensor.hallway_multisensor_burglar
    from: '8'
    to: '0'
  action:
    service: light.turn_off
    entity_id: light.hallway_lights



# Toilet multisensor

- alias: Turn on toilet lights on motion
  trigger:
    platform: state
    entity_id: sensor.toilet_multisensor_burglar
    from: '0'
    to: '8'
  action:
    service: light.turn_on
    entity_id: light.toilet_lights

- alias: Turn off toilet lights when motion stops
  trigger:
    platform: state
    entity_id: sensor.toilet_multisensor_burglar
    from: '8'
    to: '0'
  action:
    service: light.turn_off
    entity_id: light.toilet_lights


# Bathroom multisensor

- alias: Turn on bathroom lights on motion
  trigger:
    platform: state
    entity_id: sensor.bathroom_multisensor_burglar
    from: '0'
    to: '8'
  action:
    service: light.turn_on
    entity_id: light.bathroom_lights


- alias: Turn off bathroom lights when motion stops unless humidity is high
  trigger:
    platform: state
    entity_id: sensor.bathroom_multisensor_burglar
    from: '8'
    to: '0'
  condition:
    - condition: numeric_state
      entity_id: 'sensor.bathroom_multisensor_relative_humidity'
      below: 65
  action:
    service: light.turn_off
    entity_id: light.bathroom_lights


- alias: Turn off bathroom lights when humidity gets lower than 65 percent unless there is motion
  trigger:
    platform: numeric_state
    entity_id: sensor.bathroom_multisensor_relative_humidity
    below: 65
  condition:
    - condition: state
      entity_id: 'sensor.bathroom_multisensor_burglar'
      state: '0'
  action:
    service: light.turn_off
    entity_id: light.bathroom_lights
